#!/bin/bash
#===================================================================================================
# CyborgAI
# CC BY-NC-ND 4.0 Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International
# github: https://github.com/cyborg-ai-git
#===================================================================================================
PACKAGE_NAME="$(basename "$(pwd)")"
DIRECTORY_BASE=$(dirname "$(realpath "$0")")

CURRENT_TIME=$(date +"%Y.%-m.%-d%H%M")
#---------------------------------------------------------------------------------------------------
clear
#---------------------------------------------------------------------------------------------------
echo "ðŸŸ¢ $CURRENT_TIME RUN crate.io publish $PACKAGE_NAME $DIRECTORY_BASE"
#---------------------------------------------------------------------------------------------------
CURRENT_DIRECTORY=$(pwd)
#---------------------------------------------------------------------------------------------------
cd "$DIRECTORY_BASE" || exit
cd ..
echo pwd
#sh ../run_git_push.sh
#---------------------------------------------------------------------------------------------------
DIRECTORY_DOC="./documentation"
DIRECTORY_DOC_DATA="$DIRECTORY_DOC/data"
#---------------------------------------------------------------------------------------------------
cd "$DIRECTORY_DOC_DATA" || exit
for file in ./*.puml; do
  echo "$file"
  plantuml -v -tsvg "$file"
done
#---------------------------------------------------------------------------------------------------
cd ../../
#---------------------------------------------------------------------------------------------------
#cargo clean
cargo doc --no-deps --features doc-uml --open
cp -Rf "./target/doc" "./$DIRECTORY_DOC/"

#benches

#tests

#---------------------------------------------------------------------------------------------------
cd "$CURRENT_DIRECTORY" || exit
#===================================================================================================